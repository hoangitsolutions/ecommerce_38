<% provide :title, t(".title") %>
<div class="col-sm-9 col-sm-offset-3 col-lg-10 col-lg-offset-2 main">
  <div class="row">
    <ol class="breadcrumb">
      <li>
        <a href="#"><svg class="glyph stroked home">
          <use xlink:href="#stroked-home"></use></svg></a>
        </li>
        <li class="active">Danh mục</li>
      </ol>
    </div>
    <div class="row">
      <div class="col-lg-12">
        <div class="panel panel-default">
          <div class="panel-heading">
           <a href="/admin/categories/new" title=""><button class="btn btn-primary pull-right" type="button">Thêm mới danh mục</button></a>
         </div>
         <div class="panel-body">
          <div class="table-responsive">
            <table class="table table-bordered" id="dataTable" width="100%" cellspacing="0">
              <thead>
                <tr>
                  <th><%= t ".id" %></th>
                  <th><%= t ".name" %></th>
                  <th><%= t ".parent_id" %></th>
                  <th class="function"><%= t ".function" %></th>
                </tr>
              </thead>
              <tbody>
                <%
                @categories.each do |category|
                 if category.parent_id.blank?
                  %>
                  <tr>
                    <td><%= category.id %></td>
                    <td><%= link_to category.name, edit_admin_category_path(category) %></td>
                    <td><%= category.parent_id %></td>
                    <td class="function">
                      <%= link_to image_tag("edit.png", alt: t(".edit")), edit_admin_category_path(category) %> |
                      <%= link_to image_tag("delete.png", alt: t(".delete")), admin_category_path(category), method: :delete, data: {confirm: t(".confirm_delete")} %>
                    </td>
                    <%= render partial: "subcategory", locals: {subcategories: category.subcategories} if category.subcategories.present? %>
                  </tr>
                  <%
                end
              end
              %>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
</div>
